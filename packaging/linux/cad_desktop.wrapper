#!/bin/sh
# Hydra CAD – ein Launcher für Build und Installation.
# Wayland: XCB erzwingen, damit SoQt/Coin3D 3D-Viewport funktioniert.
if [ -z "$QT_QPA_PLATFORM" ] && [ -n "$WAYLAND_DISPLAY" ]; then
  export QT_QPA_PLATFORM=xcb
fi
# Zuerst lokalen Build nutzen (z. B. ~/GitHub/CAD/build), sonst installierte Version.
BUILD="${HYDRACAD_BUILD:-$HOME/GitHub/CAD/build}"
if [ -x "$BUILD/cad_desktop" ]; then
  cd "$BUILD" && exec ./cad_desktop "$@"
fi
exec /usr/lib/hydracad/cad_desktop "$@"
